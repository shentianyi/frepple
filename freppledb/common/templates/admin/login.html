{% extends "admin/base_site.html" %}
{% comment %}
This template overrides one of the standard admin ones.
The changes are:
- take care of url prefix
- give the login button a jquery-ui look and feel
- check for old versions of Internet Explorer
{% endcomment %}
{% load i18n %}

{% block extrastyle %}{{ block.super }}

<link rel="stylesheet" type="text/css" href="{{STATIC_URL}}css/login.css"/>

{% endblock %}

{% block extrahead %}
<script type="text/javascript" src="{{ STATIC_URL }}js/jquery-2.1.4.min.js"></script>
<script type="text/javascript">
    $(function () {
        if (!!window.MSInputMethodContext && !!document.documentMode) {
            // You are using internet explorer.
            // See http://stackoverflow.com/questions/21825157/internet-explorer-11-detection
            $("#row1").html(
                '<br>Internet Explorer is no longer supported.<br>'
                + 'Microsoft doesn\'t keep this browser up to date with the modern '
                + 'web technologies used by frePPLe.<br><br>'
                + 'Please Google <strong>Chrome</strong>, Mozilla <strong>Firefox</strong>, '
                + 'Microsoft <strong>Edge</strong>, Apple <strong>Safari</strong> '
                + 'or another modern browser.'
            );
            $('#row2').hide();
        }
        else
            $('#id_username').focus();

        $("#login-form").on('submit', function () {
            $("#id_password").val($.trim($("#id_password").val()));
        });

    });
</script>

{% endblock %}


{% block bodyclass %}login{% endblock %}

{% block nav-global %}{% endblock %}

{% block content_title %}{% endblock %}

{% block breadcrumbs %}{% endblock %}

{% block content %}


<!--<div class="row" style="padding-bottom: 30px; padding-top: 50px;">-->
<!--<div class="col-xs-4 center-block" style="min-width: 200px; max-width:300px; float:none;">-->
<!--{% block branding %}{{ block.super }}{% endblock %}-->
<!--</div>-->
<!--</div>-->

<div class="row" id="content-main">
    <div class="col-md-8">
        <div class="leftBg">
            <div class="leftHeader">
                <img class="laurusImg" src="{{STATIC_URL}}img/login/gps.png"/>
                <span class="laurus">LAURUS</span>
            </div>

            <div class="leftImg">
                <img width="100%" src="{{STATIC_URL}}img/login/img.png"/>
            </div>
            <div class="leftFooter">上海劳锐智能系统技术有限公司</div>
        </div>
    </div>

    <div id="row1" class=" col-md-4 center-block">
        <div class="loginForm">
            <form role="form" action="{{ request.prefix }}{{ app_path }}" method="post" id="login-form">{% csrf_token %}
                <div class="header">
                    <div class="title"><b>APS</b>智能物流管理系统</div>
                    <p class="subtitle">The APS intelligent logistics management system</p>
                </div>

                <div class="formInputGroup">
                    <div class="input-group">
                        <!--<span id="basic_id_username" class="input-group-addon required">{% trans 'Username'|capfirst %}:</span>-->
                        <span id="basic_id_username" class="loginIcon input-group-addon required">
                    <img src="{{STATIC_URL}}img/login/username.png"/>
                </span>

                        <input id="id_username" class="form-control loginInput" maxlength="254"
                               placeholder="{% trans 'Please input username'|capfirst %}" name="username"
                               type="text" aria-describedby="basic_id_username">
                    </div>
                    <p>
                        {% if not form.this_is_the_login_form.errors %}
                        {% blocktrans %}
                        {{ form.username.errors }}{% endblocktrans %}
                        {% endif %}
                    </p>

                    <div class="input-group">


                        <!--<span id="basic_id_password" class="input-group-addon required">{% trans 'Password'|capfirst %}:</span>-->
                        <span id="basic_id_password" class="loginIcon input-group-addon required">
                        <img src="{{STATIC_URL}}img/login/password.png"/>
                    </span>

                        <input id="id_password" class="form-control loginInput"
                               placeholder="{% trans 'Please input password'|capfirst %}"
                               name="password" type="password"
                               aria-describedby="basic_id_password">

                        <input type="hidden" name="this_is_the_login_form" value="1"/>
                        <input type="hidden" name="next" value="{{ request.prefix }}{{ next }}"/>
                    </div>
                    <p>
                        {% if not form.this_is_the_login_form.errors %}{{ form.password.errors }}
                        {% endif %}
                        {% comment %}Translators: Translation included with Django {% endcomment %}
                    </p>
                    <div class="forgetPassword">
                        <a href="/reset_password/"><u>{% trans "Forgot your password?" %}</u></a>
                    </div>
                </div>

                <div class="form-group text-center" style="margin-top: 20px;">
                    {% comment %}Translators: Translation included with Django {% endcomment %}
                    <input type="submit" class="btn btn-lg-primary-aps"
                           value="{% trans 'Login'|capfirst %}"/>
                </div>

                {% if form.errors and not form.non_field_errors and not form.this_is_the_login_form.errors %}
                <p class="errornote">
                    {% comment %}Translators: Translation included with Django {% endcomment %}
                    {% if form.errors.items|length == 1 %}{% trans "Please correct the error below." %}{% else %}
                    {% comment %}Translators: Translation included with Django {% endcomment %}
                    {% trans "Please correct the error below." %}
                    {% endif %}
                </p>
                {% endif %}

                {% if form.non_field_errors or form.this_is_the_login_form.errors %}
                {% for error in form.non_field_errors %}
                <p class="errornote">
                    {% trans error%}
                </p>
                {% endfor %}
                {% for error in form.this_is_the_login_form.errors %}
                <p class="errornote">
                    {% trans error%}
                </p>
                {% endfor %}
                {% endif %}
            </form>
        </div>

        <div class="logoFooter">
            <img src="{{STATIC_URL}}img/logo.png">
        </div>
    </div>


</div>

{% checkPassword "admin" "admin" as recommend_reset %}
{% if recommend_reset %}
<!--<div class="row" id="row2">-->
<!--<div class="col-xs-4 center-block alert alert-danger" role="alert" style="min-width: 200px; max-width:300px; float:none; text-align:center;">-->
<!--{% blocktrans %}The user "admin" has password "admin".<br>-->
<!--We suggest changing this password.{% endblocktrans %}-->
<!--</div>-->
<!--</div>-->
{% endif %}
{% endblock %}
