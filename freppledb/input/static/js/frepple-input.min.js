/* frePPLe 4.0.0 2018-11-06
Copyright (C) 2010-2017 by frePPLe bvba

This library is free software; you can redistribute it and/or modify it
under the terms of the GNU Affero General Public License as published
by the Free Software Foundation; either version 3 of the License, or
(at your option) any later version.

This library is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero
General Public License for more details.

You should have received a copy of the GNU Affero General Public
License along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/

function BufferFactory(a,b,c,d){function e(a){a&&this.extend(a)}function f(a){angular.forEach(a,function(b,e){switch(e){case"location":b&&!b instanceof d&&(a.location=new d(b));break;case"item":b&&!b instanceof c&&(a.item=new d(b))}}),angular.extend(this,a)}function g(){var c=this;return a.get(b()+"/api/input/buffer/"+encodeURIComponent(c.name)+"/").then(function(a){return j&&console.log("Buffer get '"+c.name+"': ",a.data),c.extend(a.data),c})}function h(){var c=this;return a.put(b()+"/api/input/buffer/"+encodeURIComponent(c.name)+"/",c).then(function(a){return j&&console.log("Buffer save '"+c.name+"': ",a.data),c.extend(a.data),c})}function i(){var c=this;return a.delete(b()+"/api/input/buffer/"+encodeURIComponent(c.name)+"/").then(function(a){return j&&console.log("Buffer delete '"+c.name+"': ",a.data),c})}var j=!1;return e.prototype={extend:f,get:g,save:h,remove:i},e}function DemandFactory(a,b,c,d,e){function f(a){a&&this.extend(a)}function g(a){angular.forEach(a,function(b,f){switch(f){case"due":moment.isMoment(b)||(a.due=moment(b));break;case"pegging":b.forEach(function(a,b){moment.isMoment(a.operationplan.start)||(a.operationplan.start=moment(a.operationplan.start)),moment.isMoment(a.operationplan.end)||(a.operationplan.end=moment(a.operationplan.end))});break;case"problems":case"constraints":b.forEach(function(a,b){moment.isMoment(a.start)||(a.start=moment(a.start)),moment.isMoment(a.end)||(a.end=moment(a.end))});break;case"item":b&&!b instanceof d&&(a.item=new d(b));break;case"location":b&&!b instanceof c&&(a.location=new c(b));break;case"customer":b&&!b instanceof e&&(a.customer=new e(b));break;case"maxlateness":a.maxlateness=b/86400}}),angular.extend(this,a)}function h(){var a={name:this.name};return void 0!==this.quantity&&(a.quantity=this.quantity),void 0!==this.description&&(a.description=this.description),void 0!==this.category&&(a.category=this.category),void 0!==this.subcategory&&(a.subcategory=this.subcategory),void 0!==this.due&&(a.due=this.due.format("YYYY-MM-DDTHH:mm:ss")),void 0!==this.item&&this.item&&(a.item={name:this.item.name}),void 0!==this.location&&this.location&&(a.location={name:this.location.nr}),void 0!==this.customer&&this.customer&&(a.customer={name:this.customer.name}),void 0!==this.minshipment&&(a.minshipment=this.minshipment),void 0!==this.maxlateness&&(a.maxlateness=86400*this.maxlateness),void 0!==this.priority&&(a.priority=this.priority),a}function i(){var c=this;return a.get(b()+"/api/input/demand/"+encodeURIComponent(c.name)+"/").then(function(a){return q&&console.log("Demand get '"+c.name+"': ",a.data),c.extend(a.data),c})}function j(){var c=this;return a.put(b()+"/api/input/demand/"+encodeURIComponent(c.name)+"/",c.getData()).then(function(a){return q&&console.log("Demand save '"+c.name+"': ",a.data),c.extend(a.data),c})}function k(){var c=this;return a.delete(b()+"/api/input/demand/"+encodeURIComponent(c.name)+"/").then(function(a){return q&&console.log("Demand delete '"+c.name+"': ",a.data),c.status="closed",c})}function l(c){var d=this;return a.post(b()+"/quote/info/",[d.name]).then(function(a){return q&&console.log("Demand info '"+d.name+"': ",a.data),d.extend(a.data.demands[0]),d})}function m(){var c=this;return c.status="inquiry",a.post(b()+"/quote/inquiry/",{demands:[c.getData()]}).then(function(a){return q&&console.log("Demand inquiry '"+c.name+"': ",a.data),c.extend(a.data.demands[0]),c})}function n(){var c=this;return a.post(b()+"/quote/quote/",{demands:[c.getData()]}).then(function(a){return q&&console.log("Demand quote '"+c.name+"': ",a.data),c.extend(a.data.demands[0]),c})}function o(){var c=this;return a.post(b()+"/quote/cancel/?name="+encodeURIComponent(c.name)).then(function(a){return q&&console.log("Demand '"+c.name+"' canceled"),c.status="closed",c})}function p(){var c=this;return a.post(b()+"/quote/confirm/?name="+encodeURIComponent(c.name)).then(function(a){return q&&console.log("Demand '"+c.name+"' confirmed"),c.status="confirmed",c})}var q=!0;return f.prototype={extend:g,getData:h,get:i,save:j,remove:k,quote:n,cancel:o,inquiry:m,confirm:p,info:l},f}function CustomerFactory(a,b){function c(a){a&&angular.extend(this,a)}function d(a){angular.extend(this,a)}function e(){var c=this;return a.get(b()+"/api/input/customer/"+encodeURIComponent(c.name)+"/").then(function(a){return h&&console.log("Customer get '"+c.name+"': ",a.data),c.extend(a.data),c})}function f(){var c=this;return a.put(b()+"/api/input/customer/"+encodeURIComponent(c.name)+"/",c).then(function(a){return h&&console.log("Customer save '"+c.name+"': ",a.data),c.extend(a.data),c})}function g(){var c=this;return a.delete(b()+"/api/input/customer/"+encodeURIComponent(c.name)+"/").then(function(a){return h&&console.log("Customer delete '"+itm.name+"': ",a.data),c})}var h=!1;return c.prototype={extend:d,get:e,save:f,remove:g},c}function ItemFactory(a,b){function c(a){a&&this.extend(a)}function d(a){angular.extend(this,a)}function e(){var c=this;return a.get(b()+"/api/input/item/"+encodeURIComponent(c.name)+"/").then(function(a){return h&&console.log("Item get '"+c.name+"': ",a.data),c.extend(a.data),c})}function f(){var c=this;return a.put(b()+"/api/input/item/"+encodeURIComponent(c.name)+"/",c).then(function(a){return h&&console.log("Item save '"+c.name+"': ",a.data),c.extend(a.data),c})}function g(){var c=this;return a.delete(b()+"/api/input/item/"+encodeURIComponent(c.name)+"/").then(function(a){return h&&console.log("Item delete '"+c.name+"': ",a.data),c})}var h=!1;return c.prototype={extend:d,get:e,save:f,remove:g},c}function LocationFactory(a,b){function c(a){a&&this.extend(a)}function d(a){angular.extend(this,a)}function e(){var c=this;return a.get(b()+"/api/input/location/"+encodeURIComponent(c.name)+"/").then(function(a){return h&&console.log("Location get '"+c.name+"': ",a.data),c.extend(a.data),c})}function f(){var c=this;return a.put(b()+"/api/input/location/"+encodeURIComponent(c.name)+"/",c).then(function(a){return h&&console.log("Location save '"+c.name+"': ",a.data),c.extend(a.data),c})}function g(){var c=this;return a.delete(b()+"/api/input/location/"+encodeURIComponent(c.name)+"/").then(function(a){return h&&console.log("Location delete '"+c.name+"': ",a.data),c})}var h=!1;return c.prototype={extend:d,get:e,save:f,remove:g},c}function OperationFactory(a,b,c){function d(a){a&&this.extend(a)}function e(a){angular.forEach(a,function(b,d){switch(d){case"location":b&&!b instanceof c&&(a.location=new c(b))}}),angular.extend(this,a)}function f(){var c=this;return a.get(b()+"/api/input/operation/"+encodeURIComponent(c.name)+"/").then(function(a){return i&&console.log("Operation get '"+c.name+"': ",a.data),c.extend(a.data),c})}function g(){var c=this;return a.put(b()+"/api/input/operation/"+encodeURIComponent(c.name)+"/",c).then(function(a){return i&&console.log("Operation save '"+c.name+"': ",a.data),c.extend(a.data),c})}function h(){var c=this;return a.delete(b()+"/api/input/operation/"+encodeURIComponent(c.name)+"/").then(function(a){return i&&console.log("Operation delete '"+c.name+"': ",a.data),c})}var i=!1;return d.prototype={extend:e,get:f,save:g,remove:h},d}function OperationPlanFactory(a,b,c,d,e){function f(a){a&&this.extend(a)}function g(a){angular.forEach(a,function(b,f){switch(f){case"operation":b&&!b instanceof c&&(a.operation=new c(b));break;case"location":b&&!b instanceof d&&(a.demand=new d(b));break;case"item":b&&!b instanceof e&&(a.item=new e(b))}}),angular.extend(this,a)}function h(c){var d=this;return void 0===d.id?d:a.get(b()+"/operationplan/?id="+encodeURIComponent(d.id)).then(function(a){return k&&(console.log("Operation get '"+d.id+"': "),console.log(a.data)),d.extend(a.data[0]),"function"==typeof c&&c(d),d})}function i(){var c=this;return a.put(b()+"/api/input/operationplan/?id="+encodeURIComponent(c.name),c).then(function(a){return k&&console.log("OperationPlan save '"+c.name+"': ",a.data),c.extend(a.data),c})}function j(){var c=this;return a.delete(b()+"/api/input/operationplan/?id="+encodeURIComponent(c.name)).then(function(a){return k&&console.log("OperationPlan delete '"+c.name+"': ",a.data),c})}var k=!1;return f.prototype={extend:g,get:h,save:i,remove:j},f}function ResourceFactory(a,b,c){function d(a){a&&this.extend(a)}function e(a){angular.forEach(a,function(b,d){switch(d){case"location":b&&!b instanceof c&&(a.location=new c(b))}}),angular.extend(this,a)}function f(){var c=this;return a.get(b()+"/api/input/resource/"+encodeURIComponent(c)+"/").then(function(a){return i&&console.log("Resource get '"+c.name+"': ",a.data),c.extend(a.data),c})}function g(){var c=this;return a.put(b()+"/api/input/resource/"+encodeURIComponent(red.name)+"/",c).then(function(a){return i&&console.log("Resource save '"+c.name+"': ",a.data),c.extend(a.data),c})}function h(){var c=this;return a.delete(b()+"/api/input/resource/"+encodeURIComponent(c)+"/").then(function(a){return i&&console.log("Resource delete '"+c.name+"': ",a.data),c})}var i=!1;return d.prototype={extend:e,get:f,save:g,remove:h},d}function ModelService(a,b,c,d,e,f){function g(g){for(var i in g.items)h.items[g.items[i].name]=new c(g.items[i]);for(var i in g.operations)h.operations[g.operations[i].name]=new e(g.operations[i]);for(var i in g.demands)h.demands[g.demands[i].name]=new b(g.demands[i]);for(var i in g.locations)h.locations[g.locations[i].name]=new d(g.locations[i]);for(var i in g.buffers)h.buffers[g.buffers[i].name]=new a(g.buffers[i]);for(var i in g.resources)h.resources[g.resources[i].name]=new f(g.resources[i])}var h={demands:{},operations:{},items:{},locations:{},buffers:{},resources:{}};return{masterdata:h,load:g}}angular.module("frepple.input",["frepple.common"]),angular.module("frepple.input").factory("Buffer",BufferFactory),BufferFactory.$inject=["$http","getURLprefix","Item","Location"],angular.module("frepple.input").factory("Demand",DemandFactory),DemandFactory.$inject=["$http","getURLprefix","Location","Item","Customer"],angular.module("frepple.input").factory("Customer",CustomerFactory),CustomerFactory.$inject=["$http","getURLprefix"],angular.module("frepple.input").factory("Item",ItemFactory),ItemFactory.$inject=["$http","getURLprefix"],angular.module("frepple.input").factory("Location",LocationFactory),LocationFactory.$inject=["$http","getURLprefix"],angular.module("frepple.input").factory("Operation",OperationFactory),OperationFactory.$inject=["$http","getURLprefix","Location"],angular.module("frepple.input").factory("OperationPlan",OperationPlanFactory),OperationPlanFactory.$inject=["$http","getURLprefix","Operation","Location","Item"],angular.module("frepple.input").factory("Resource",ResourceFactory),ResourceFactory.$inject=["$http","getURLprefix","Location"],angular.module("frepple.input").service("Model",ModelService),ModelService.$inject=["Buffer","Demand","Item","Location","Operation","Resource"];
//# sourceMappingURL=frepple-input.min.js.map